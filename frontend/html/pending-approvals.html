<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملفات بانتظار الاعتماد</title>
    <link rel="stylesheet" href="../css/pending-approvals.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <div class="hospital-logo">
                <img src="../images/hospital-logo.png" alt="شعار مستشفى الملك عبد العزيز" />
            </div>
            <div class="system-title">
                <img src="../images/system-title.png" alt="نظام إدارة الجودة والسلامة" />
            </div>
        </div>
    </header>
    <div class="header-actions">
        <button class="back-btn" onclick="history.back()">
            <i class="fas fa-arrow-right" id="backIcon"></i>
            <span>رجوع</span>
        </button>
        <button class="home-btn" onclick="window.location.href='index.html'">
            <i class="fas fa-home"></i>
            <span>الرئيسية</span>
        </button>
    </div>
    <main>
        <div class="page-header">
            <div class="pending-title">
                <span>ملفات بانتظار الاعتماد</span>
                <span class="pending-count">12</span>
            </div>
        </div>
        <div class="filters-bar">
            <div class="search-box">
                <i class="fa fa-search"></i>
                <input type="text" class="search-input" placeholder="...البحث عن ملف">
            </div>
            <button class="filter-btn"><i class="fa-regular fa-calendar"></i> التاريخ</button>
            <select class="filter-select">
                <option>جميع الأقسام</option>
            </select>
        </div>
        <div class="approvals-list">
            <!-- بطاقة 1 -->
            <div class="approval-card">
                <div class="card-header">
                    <span class="file-title">طلب الموافقة على الميزانية</span>
                </div>
                <div class="card-body">
                    <div class="user-info">
                        <div class="user-details">
                            <span class="user-name">سارة خالد</span>
                            <span class="user-meta"><i class="fa fa-building"></i> قسم المالية</span>
                            <span class="user-meta"><i class="fa-regular fa-calendar"></i> 21 يناير 2024</span>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-blue">اعتماد إلكتروني</button>
                        <button class="btn btn-green">توقيع بالنيابة</button>
                    </div>
                    <div class="status approved">معتمد</div>
                    <div class="status-info approved"><i class="fa fa-check-circle"></i> تم الاعتماد في 22 يناير 2024</div>
                </div>
            </div>
            <!-- بطاقة 2 -->
            <div class="approval-card">
                <div class="card-header">
                    <span class="file-title">تقرير المبيعات الشهري</span>
                </div>
                <div class="card-body">
                    <div class="user-info">
                        <div class="user-details">
                            <span class="user-name">محمد أحمد</span>
                            <span class="user-meta"><i class="fa fa-building"></i> قسم المبيعات</span>
                            <span class="user-meta"><i class="fa-regular fa-calendar"></i> 22 يناير 2024</span>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-green">توقيع</button>
                        <button class="btn btn-red">رفض</button>
                        <button class="btn btn-blue">تحويل</button>
                        <button class="btn btn-blue">اعتماد إلكتروني</button>
                        <button class="btn btn-green">توقيع بالنيابة</button>
                    </div>
                </div>
            </div>
            <!-- بطاقة 3 -->
            <div class="approval-card">
                <div class="card-header">
                    <span class="file-title">تقرير المبيعات الشهري</span>
                </div>
                <div class="card-body">
                    <div class="user-info">
                        <div class="user-details">
                            <span class="user-name">محمد أحمد</span>
                            <span class="user-meta"><i class="fa fa-building"></i> قسم المبيعات</span>
                            <span class="user-meta"><i class="fa-regular fa-calendar"></i> 22 يناير 2024</span>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-green">توقيع</button>
                        <button class="btn btn-red">رفض</button>
                        <button class="btn btn-blue">تحويل</button>
                        <button class="btn btn-blue">اعتماد إلكتروني</button>
                        <button class="btn btn-green">توقيع بالنيابة</button>
                    </div>
                </div>
            </div>
            <!-- بطاقة 4 -->
            <div class="approval-card">
                <div class="card-header">
                    <span class="file-title">خطة التسويق الربع سنوية</span>
                </div>
                <div class="card-body">
                    <div class="user-info">
                        <div class="user-details">
                            <span class="user-name">عمر محمد</span>
                            <span class="user-meta"><i class="fa fa-building"></i> قسم التسويق</span>
                            <span class="user-meta"><i class="fa-regular fa-calendar"></i> 20 يناير 2024</span>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-blue">اعتماد إلكتروني</button>
                        <button class="btn btn-green">توقيع بالنيابة</button>
                    </div>
                    <div class="status rejected">مرفوض</div>
                    <div class="status-info rejected"><i class="fa fa-times-circle"></i> يحتاج إلى مراجعة الأهداف</div>
                </div>
            </div>
        </div>
    </main>
        
    <!-- ===== توقيع (Signature) Modal ===== -->
    <div id="signatureModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <button class="modal-close">&times;</button>
                <h2 class="modal-title" data-translate="signature">توقيع</h2>
            </div>
            <div class="modal-body">
                <div class="canvas-wrapper">
                    <canvas id="signatureCanvas"></canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnConfirmSignature" class="btn-confirm" data-translate="confirm-signature">تأكيد التوقيع</button>
                <button id="btnClear" class="btn-cancel" data-translate="clear">مسح</button>
            </div>
        </div>
    </div>

    <!-- ===== رفض الطلب Modal ===== -->
    <div id="rejectModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <button class="modal-close" data-modal="rejectModal">&times;</button>
                <h2 class="modal-title" style="color: #2563eb;" data-translate="reject-request">رفض الطلب</h2>
            </div>
            <div class="modal-body">
                <label for="rejectReason" class="body-label" data-translate="enter-reject-reason">يرجى كتابة سبب الرفض</label>
                <textarea id="rejectReason" class="body-textarea" rows="4"></textarea>
            </div>
            <div class="modal-footer">
                <button id="btnSendReason" class="btn-confirm" data-translate="send-reason">إرسال السبب</button>
            </div>
        </div>
    </div>

    <!-- ===== مودال QR Code ===== -->
    <div id="qrModal" class="modal-overlay" style="display:none;">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" data-translate="electronic-approval">الاعتماد الإلكتروني</h2>
                <button class="modal-close" data-modal="qrModal">&times;</button>
            </div>
            <div class="modal-body">
                <p style="font-size: 16px; color: #333; margin-bottom: 20px;" data-translate="electronic-approval-desc">
                    سيتم اعتماد هذا الملف بشكل إلكتروني ولن تكون هناك حاجة للتوقيع اليدوي.
                </p>
                <div id="qrCodePreview"></div>
            </div>
            <div class="modal-footer">
                <button id="btnElectronicApprove" class="btn-confirm" data-translate="electronic-approve">اعتماد إلكتروني</button>
            </div>
        </div>
    </div>

    <!-- ===== توقيع بالنيابة عن Modal ===== -->
    <div id="delegateModal" class="modal-overlay" style="display:none;">
        <div class="modal">
            <div class="modal-header">
                <button class="modal-close" data-modal="delegateModal">&times;</button>
                <h2 class="modal-title" data-translate="sign-on-behalf">توقيع بالنيابة عن</h2>
            </div>
            <div class="modal-body">
                <form id="delegateForm" novalidate>
                    <div class="form-group">
                        <label for="delegateDept" data-translate="department">القسم</label>
                        <select id="delegateDept" name="delegateDept" required>
                            <option value="" disabled selected data-translate="select-department">اختر القسم</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="delegateUser" data-translate="user-name">اسم المستخدم</label>
                        <select id="delegateUser" name="delegateUser" required>
                            <option value="" disabled selected data-translate="select-user">اختر المستخدم</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="delegateNotes" data-translate="notes">ملاحظات</label>
                        <textarea id="delegateNotes" name="delegateNotes" rows="4" placeholder=""></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="btnDelegateConfirm" class="btn-confirm" data-translate="confirm">تأكيد</button>
            </div>
        </div>
    </div>
</body>
</html> 